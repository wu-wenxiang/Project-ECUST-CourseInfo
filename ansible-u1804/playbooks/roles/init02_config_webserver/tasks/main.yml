- name: Install dependency packages
  apt:
    name:
      - nginx
      - supervisor
      - docker.io
    state: present

- name: Make sure docker is running
  systemd:
    state: started
    name: docker

- name: Make sure docker is enabled
  systemd:
    name: docker
    enabled: yes

- name: Install pip depedences
  pip:
    name: "{{ item }}"
    state: present
  loop:
    - docker

- name: Pull docker images maodouzi/ecust-courseinfo:v1.0
  docker_image:
    state: present
    name: maodouzi/ecust-courseinfo
    tag: "v1.0"
